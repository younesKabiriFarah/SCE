{"remainingRequest":"/Users/yuoneskabiri/Desktop/Desktop - MacBook Pro de Yuones/UNI/4º/SCE/Practica/e-commerce-vue___/node_modules/babel-loader/lib/index.js!/Users/yuoneskabiri/Desktop/Desktop - MacBook Pro de Yuones/UNI/4º/SCE/Practica/e-commerce-vue___/src/store/auth.js","dependencies":[{"path":"/Users/yuoneskabiri/Desktop/Desktop - MacBook Pro de Yuones/UNI/4º/SCE/Practica/e-commerce-vue___/src/store/auth.js","mtime":1654471114569},{"path":"/Users/yuoneskabiri/Desktop/Desktop - MacBook Pro de Yuones/UNI/4º/SCE/Practica/e-commerce-vue___/babel.config.js","mtime":1652639069000},{"path":"/Users/yuoneskabiri/Desktop/Desktop - MacBook Pro de Yuones/UNI/4º/SCE/Practica/e-commerce-vue___/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuoneskabiri/Desktop/Desktop - MacBook Pro de Yuones/UNI/4º/SCE/Practica/e-commerce-vue___/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95dW9uZXNrYWJpcmkvRGVza3RvcC9EZXNrdG9wIC0gTWFjQm9vayBQcm8gZGUgWXVvbmVzL1VOSS80XHhCQS9TQ0UvUHJhY3RpY2EvZS1jb21tZXJjZS12dWVfX18vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7IC8vVG9hc3QKCmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAidnVlLXRvYXN0aWZpY2F0aW9uIjsKdmFyIHRvYXN0ID0gdXNlVG9hc3QoKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIHRva2VuOiBudWxsLAogICAgdXNlcjogbnVsbAogIH0sCiAgZ2V0dGVyczogewogICAgYXV0aGVudGljYXRlZDogZnVuY3Rpb24gYXV0aGVudGljYXRlZChzdGF0ZSkgewogICAgICBpZiAoc3RhdGUudG9rZW4gJiYgc3RhdGUudXNlcikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIHVzZXI6IGZ1bmN0aW9uIHVzZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgICB9LAogICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbjsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICB9LAogICAgU0VUX1VTRVI6IGZ1bmN0aW9uIFNFVF9VU0VSKHN0YXRlLCBkYXRhKSB7CiAgICAgIHN0YXRlLnVzZXIgPSBkYXRhOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgc2lnbm91dDogZnVuY3Rpb24gc2lnbm91dChfcmVmKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNvbW1pdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgIiIpOwogICAgICAgICAgICAgICAgY29tbWl0KCJTRVRfVVNFUiIsICIiKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNpZ25JbjogZnVuY3Rpb24gc2lnbkluKF9yZWYyLCBjcmVkZW50aWFscykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgZGlzcGF0Y2g7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjIuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hdXRoL2xvZ2luIiwgY3JlZGVudGlhbHMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICB0b2FzdC5zdWNjZXNzKCJMb2dpbiBjb3JyZWN0byEiKTsKICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goImF0dGVtcHRVc2VyIiwgcmVzLmRhdGEuZGF0YS51c2VyKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCJhdHRlbXB0IiwgcmVzLmRhdGEuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIHRvYXN0LmVycm9yKCJMb2dpbiBpbmNvcnJlY3RvISIpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3RlcihfcmVmMywgbmV3VXNlcikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgZGlzcGF0Y2g7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjMuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hdXRoL3JlZ2lzdGVyIiwgbmV3VXNlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIHRvYXN0LnN1Y2Nlc3MoIlJlZ2lzdHJhZG8gY29ycmVjdGFtZW50ZSEiKTsKICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goImF0dGVtcHRVc2VyIiwgcmVzLmRhdGEudXNlcik7CiAgICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgiYXR0ZW1wdCIsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgdG9hc3QuZXJyb3IoIkxvZ2luIGluY29ycmVjdG8hIik7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYXR0ZW1wdFVzZXI6IGZ1bmN0aW9uIGF0dGVtcHRVc2VyKF9yZWY0LCB1c2VyKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBjb21taXQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgICAgICAgICAgICAgIGNvbW1pdCgiU0VUX1VTRVIiLCB1c2VyKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYXR0ZW1wdDogZnVuY3Rpb24gYXR0ZW1wdChfcmVmNSwgdG9rZW4pIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIGNvbW1pdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgICAgICAgICAgICAgY29tbWl0KCJTRVRfVE9LRU4iLCB0b2tlbik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbW9kdWxlczoge30KfTs="},{"version":3,"sources":["/Users/yuoneskabiri/Desktop/Desktop - MacBook Pro de Yuones/UNI/4º/SCE/Practica/e-commerce-vue___/src/store/auth.js"],"names":["axios","useToast","toast","namespaced","state","token","user","getters","authenticated","mutations","SET_TOKEN","SET_USER","data","actions","signout","commit","signIn","credentials","dispatch","post","then","res","success","catch","err","error","console","log","register","newUser","attemptUser","attempt","modules"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\n//Toast\nimport { useToast } from \"vue-toastification\";\nconst toast = useToast();\n\nexport default {\n  namespaced: true,\n  state: {\n    token: null,\n    user: null,\n  },\n  getters: {\n    authenticated(state) {\n      if (state.token && state.user) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    user(state) {\n      return state.user;\n    },\n\n    token(state) {\n      return state.token;\n    },\n  },\n\n  mutations: {\n    SET_TOKEN(state, token) {\n      state.token = token;\n    },\n    SET_USER(state, data) {\n      state.user = data;\n    },\n  },\n\n  actions: {\n    async signout({ commit }) {\n      commit(\"SET_TOKEN\", \"\");\n      commit(\"SET_USER\", \"\");\n    },\n\n    async signIn({ dispatch }, credentials) {\n      await axios\n        .post(\"http://localhost:3000/api/auth/login\", credentials)\n        .then((res) => {\n          toast.success(\"Login correcto!\");\n          dispatch(\"attemptUser\", res.data.data.user);\n          return dispatch(\"attempt\", res.data.data.token);\n        })\n        .catch((err) => {\n          toast.error(\"Login incorrecto!\");\n          console.log(err);\n        });\n    },\n\n    async register({ dispatch }, newUser) {\n      await axios\n        .post(\"http://localhost:3000/api/auth/register\", newUser)\n        .then((res) => {\n          toast.success(\"Registrado correctamente!\");\n\n          dispatch(\"attemptUser\", res.data.user);\n          return dispatch(\"attempt\", res.data.token);\n        })\n        .catch((err) => {\n          toast.error(\"Login incorrecto!\");\n          console.log(err);\n        });\n    },\n\n    async attemptUser({ commit }, user) {\n      commit(\"SET_USER\", user);\n    },\n\n    async attempt({ commit }, token) {\n      commit(\"SET_TOKEN\", token);\n    },\n  },\n\n  modules: {},\n};\n"]}]}