{"remainingRequest":"/Users/yuoneskabiri/Desktop/UNI/SCE/Practica/e-commerce-vue/node_modules/babel-loader/lib/index.js!/Users/yuoneskabiri/Desktop/UNI/SCE/Practica/e-commerce-vue/src/store/auth.js","dependencies":[{"path":"/Users/yuoneskabiri/Desktop/UNI/SCE/Practica/e-commerce-vue/src/store/auth.js","mtime":1654471114569},{"path":"/Users/yuoneskabiri/Desktop/UNI/SCE/Practica/e-commerce-vue/babel.config.js","mtime":1652639069000},{"path":"/Users/yuoneskabiri/Desktop/UNI/SCE/Practica/e-commerce-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuoneskabiri/Desktop/UNI/SCE/Practica/e-commerce-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95dW9uZXNrYWJpcmkvRGVza3RvcC9VTkkvU0NFL1ByYWN0aWNhL2UtY29tbWVyY2UtdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOyAvL1RvYXN0CgppbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gInZ1ZS10b2FzdGlmaWNhdGlvbiI7CnZhciB0b2FzdCA9IHVzZVRvYXN0KCk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICB0b2tlbjogbnVsbCwKICAgIHVzZXI6IG51bGwKICB9LAogIGdldHRlcnM6IHsKICAgIGF1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZWQoc3RhdGUpIHsKICAgICAgaWYgKHN0YXRlLnRva2VuICYmIHN0YXRlLnVzZXIpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyOwogICAgfSwKICAgIHRva2VuOiBmdW5jdGlvbiB0b2tlbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudG9rZW47CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgfSwKICAgIFNFVF9VU0VSOiBmdW5jdGlvbiBTRVRfVVNFUihzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS51c2VyID0gZGF0YTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHNpZ25vdXQ6IGZ1bmN0aW9uIHNpZ25vdXQoX3JlZikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgICAgICAgICAgICBjb21taXQoIlNFVF9UT0tFTiIsICIiKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgiU0VUX1VTRVIiLCAiIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzaWduSW46IGZ1bmN0aW9uIHNpZ25JbihfcmVmMiwgY3JlZGVudGlhbHMpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYyLmRpc3BhdGNoOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYXV0aC9sb2dpbiIsIGNyZWRlbnRpYWxzKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgdG9hc3Quc3VjY2VzcygiTG9naW4gY29ycmVjdG8hIik7CiAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKCJhdHRlbXB0VXNlciIsIHJlcy5kYXRhLmRhdGEudXNlcik7CiAgICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgiYXR0ZW1wdCIsIHJlcy5kYXRhLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICB0b2FzdC5lcnJvcigiTG9naW4gaW5jb3JyZWN0byEiKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoX3JlZjMsIG5ld1VzZXIpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYzLmRpc3BhdGNoOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvYXV0aC9yZWdpc3RlciIsIG5ld1VzZXIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICB0b2FzdC5zdWNjZXNzKCJSZWdpc3RyYWRvIGNvcnJlY3RhbWVudGUhIik7CiAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKCJhdHRlbXB0VXNlciIsIHJlcy5kYXRhLnVzZXIpOwogICAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goImF0dGVtcHQiLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIHRvYXN0LmVycm9yKCJMb2dpbiBpbmNvcnJlY3RvISIpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGF0dGVtcHRVc2VyOiBmdW5jdGlvbiBhdHRlbXB0VXNlcihfcmVmNCwgdXNlcikgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgY29tbWl0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgICAgICAgICAgICBjb21taXQoIlNFVF9VU0VSIiwgdXNlcik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGF0dGVtcHQ6IGZ1bmN0aW9uIGF0dGVtcHQoX3JlZjUsIHRva2VuKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciBjb21taXQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgICAgICAgICAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgdG9rZW4pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG1vZHVsZXM6IHt9Cn07"},{"version":3,"sources":["/Users/yuoneskabiri/Desktop/UNI/SCE/Practica/e-commerce-vue/src/store/auth.js"],"names":["axios","useToast","toast","namespaced","state","token","user","getters","authenticated","mutations","SET_TOKEN","SET_USER","data","actions","signout","commit","signIn","credentials","dispatch","post","then","res","success","catch","err","error","console","log","register","newUser","attemptUser","attempt","modules"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\n//Toast\nimport { useToast } from \"vue-toastification\";\nconst toast = useToast();\n\nexport default {\n  namespaced: true,\n  state: {\n    token: null,\n    user: null,\n  },\n  getters: {\n    authenticated(state) {\n      if (state.token && state.user) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    user(state) {\n      return state.user;\n    },\n\n    token(state) {\n      return state.token;\n    },\n  },\n\n  mutations: {\n    SET_TOKEN(state, token) {\n      state.token = token;\n    },\n    SET_USER(state, data) {\n      state.user = data;\n    },\n  },\n\n  actions: {\n    async signout({ commit }) {\n      commit(\"SET_TOKEN\", \"\");\n      commit(\"SET_USER\", \"\");\n    },\n\n    async signIn({ dispatch }, credentials) {\n      await axios\n        .post(\"http://localhost:3000/api/auth/login\", credentials)\n        .then((res) => {\n          toast.success(\"Login correcto!\");\n          dispatch(\"attemptUser\", res.data.data.user);\n          return dispatch(\"attempt\", res.data.data.token);\n        })\n        .catch((err) => {\n          toast.error(\"Login incorrecto!\");\n          console.log(err);\n        });\n    },\n\n    async register({ dispatch }, newUser) {\n      await axios\n        .post(\"http://localhost:3000/api/auth/register\", newUser)\n        .then((res) => {\n          toast.success(\"Registrado correctamente!\");\n\n          dispatch(\"attemptUser\", res.data.user);\n          return dispatch(\"attempt\", res.data.token);\n        })\n        .catch((err) => {\n          toast.error(\"Login incorrecto!\");\n          console.log(err);\n        });\n    },\n\n    async attemptUser({ commit }, user) {\n      commit(\"SET_USER\", user);\n    },\n\n    async attempt({ commit }, token) {\n      commit(\"SET_TOKEN\", token);\n    },\n  },\n\n  modules: {},\n};\n"]}]}